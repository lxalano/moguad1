function parseUri(a){for(var b=parseUri.options,c=b.parser[b.strictMode?"strict":"loose"].exec(a),d={},e=14;e--;)d[b.key[e]]=c[e]||"";return d[b.q.name]={},d[b.key[12]].replace(b.q.parser,function(a,c,e){c&&(d[b.q.name][c]=e)}),d}this.JSON||(this.JSON={}),function(){function f(a){return a<10?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g,h=gap,i=b[a];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(a)),"function"==typeof rep&&(i=rep.call(b,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,g=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,c=0;c<f;c+=1)g[c]=str(c,i)||"null";return e=0===g.length?"[]":gap?"[\n"+gap+g.join(",\n"+gap)+"\n"+h+"]":"["+g.join(",")+"]",gap=h,e}if(rep&&"object"==typeof rep)for(f=rep.length,c=0;c<f;c+=1)d=rep[c],"string"==typeof d&&(e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));else for(d in i)Object.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));return e=0===g.length?"{}":gap?"{\n"+gap+g.join(",\n"+gap)+"\n"+h+"}":"{"+g.join(",")+"}",gap=h,e}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(a){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(a,b,c){var d;if(gap="",indent="","number"==typeof c)for(d=0;d<c;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return str("",{"":a})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),Array.prototype.indexOf||(Array.prototype.indexOf=function(a){var b=this.length>>>0,c=Number(arguments[1])||0;for(c=c<0?Math.ceil(c):Math.floor(c),c<0&&(c+=b);c<b;c++)if(c in this&&this[c]===a)return c;return-1});var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(a){var b,c,d,e,f,g,h,i="",j=0;for(a=Base64._utf8_encode(a);j<a.length;)b=a.charCodeAt(j++),c=a.charCodeAt(j++),d=a.charCodeAt(j++),e=b>>2,f=(3&b)<<4|c>>4,g=(15&c)<<2|d>>6,h=63&d,isNaN(c)?g=h=64:isNaN(d)&&(h=64),i=i+this._keyStr.charAt(e)+this._keyStr.charAt(f)+this._keyStr.charAt(g)+this._keyStr.charAt(h);return i},decode:function(a){var b,c,d,e,f,g,h,i="",j=0;for(a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");j<a.length;)e=this._keyStr.indexOf(a.charAt(j++)),f=this._keyStr.indexOf(a.charAt(j++)),g=this._keyStr.indexOf(a.charAt(j++)),h=this._keyStr.indexOf(a.charAt(j++)),b=e<<2|f>>4,c=(15&f)<<4|g>>2,d=(3&g)<<6|h,i+=String.fromCharCode(b),64!==g&&(i+=String.fromCharCode(c)),64!==h&&(i+=String.fromCharCode(d));return i=Base64._utf8_decode(i)},_utf8_encode:function(a){a=a.replace(/\r\n/g,"\n");for(var b="",c=0;c<a.length;c++){var d=a.charCodeAt(c);d<128?b+=String.fromCharCode(d):d>127&&d<2048?(b+=String.fromCharCode(d>>6|192),b+=String.fromCharCode(63&d|128)):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128),b+=String.fromCharCode(63&d|128))}return b},_utf8_decode:function(a){var b,c,d,e,f="",g=0;for(b=c=d=e=0;g<a.length;)b=a.charCodeAt(g),b<128?(f+=String.fromCharCode(b),g++):b>191&&b<224?(d=a.charCodeAt(g+1),f+=String.fromCharCode((31&b)<<6|63&d),g+=2):(d=a.charCodeAt(g+1),e=a.charCodeAt(g+2),f+=String.fromCharCode((15&b)<<12|(63&d)<<6|63&e),g+=3);return f}};!function(a){var b=!1;if("function"==typeof define&&define.amd&&(define(a),b=!0),"object"==typeof exports&&(module.exports=a(),b=!0),!b){var c=window.Cookies,d=window.Cookies=a();d.noConflict=function(){return window.Cookies=c,d}}}(function(){function a(){for(var a=0,b={};a<arguments.length;a++){var c=arguments[a];for(var d in c)b[d]=c[d]}return b}function b(c){function d(b,e,f){var g;if("undefined"!=typeof document){if(arguments.length>1){if(f=a({path:"/"},d.defaults,f),"number"==typeof f.expires){var h=new Date;h.setMilliseconds(h.getMilliseconds()+864e5*f.expires),f.expires=h}f.expires=f.expires?f.expires.toUTCString():"";try{g=JSON.stringify(e),/^[\{\[]/.test(g)&&(e=g)}catch(i){}e=c.write?c.write(e,b):encodeURIComponent(String(e)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),b=encodeURIComponent(String(b)),b=b.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),b=b.replace(/[\(\)]/g,escape);var j="";for(var k in f)f[k]&&(j+="; "+k,f[k]!==!0&&(j+="="+f[k]));return document.cookie=b+"="+e+j}b||(g={});for(var l=document.cookie?document.cookie.split("; "):[],m=/(%[0-9A-Z]{2})+/g,n=0;n<l.length;n++){var o=l[n].split("="),p=o.slice(1).join("=");'"'===p.charAt(0)&&(p=p.slice(1,-1));try{var q=o[0].replace(m,decodeURIComponent);if(p=c.read?c.read(p,q):c(p,q)||p.replace(m,decodeURIComponent),this.json)try{p=JSON.parse(p)}catch(i){}if(b===q){g=p;break}b||(g[q]=p)}catch(i){}}return g}}return d.set=d,d.get=function(a){return d.call(d,a)},d.getJSON=function(){return d.apply({json:!0},[].slice.call(arguments))},d.defaults={},d.remove=function(b,c){d(b,"",a(c,{expires:-1}))},d.withConverter=b,d}return b(function(){})}),window.AtlasCookies=Cookies.noConflict(),parseUri.options={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},function(a,b,c,d,e,f,g){function h(){function h(){var a=["Googlebot/","Googlebot-Mobile","Googlebot-Image","Googlebot-News","Googlebot-Video","AdsBot-Google([^-]|$)","AdsBot-Google-Mobile","Mediapartners-Google","Mediapartners (Googlebot)","APIs-Google","bingbot","slurp","java","wget","curl","Commons-HttpClient","Python-urllib","libwww","httpunit","nutch","Go-http-client","phpcrawl","msnbot","jyxobot","FAST-WebCrawler","FAST Enterprise Crawler","biglotron","teoma","convera","seekbot","gigabot","gigablast","exabot","ia_archiver","GingerCrawler","webmon ","httrack","grub.org","UsineNouvelleCrawler","antibot","netresearchserver","speedy","fluffy","bibnum.bnf","findlink","msrbot","panscient","yacybot","AISearchBot","IOI","ips-agent","tagoobot","MJ12bot","woriobot","yanga","buzzbot","mlbot","yandexbot","yandex.com/bots","purebot","Linguee Bot","CyberPatrol","voilabot","baiduspider","citeseerxbot","spbot","twengabot","postrank","turnitinbot","scribdbot","page2rss","sitebot","linkdex","Adidxbot","blekkobot","ezooms","dotbot","Mail.RU_Bot","discobot","heritrix","findthatfile","europarchive.org","NerdByNature.Bot","sistrix crawler","ahrefsbot","Aboundex","domaincrawler","wbsearchbot","summify","ccbot","edisterbot","seznambot","ec2linkfinder","gslfbot","aihitbot","intelium_bot","facebookexternalhit","yeti","RetrevoPageAnalyzer","lb-spider","sogou","lssbot","careerbot","wotbox","wocbot","ichiro","DuckDuckBot","lssrocketcrawler","drupact","webcompanycrawler","acoonbot","openindexspider","gnam gnam spider","web-archive-net.com.bot","backlinkcrawler","coccoc","integromedb","content crawler spider","toplistbot","seokicks-robot","it2media-domain-crawler","ip-web-crawler.com","siteexplorer.info","elisabot","proximic","changedetection","blexbot","arabot","WeSEE:Search","niki-bot","CrystalSemanticsBot","rogerbot","360Spider","psbot","InterfaxScanBot","CC Metadata Scaper","g00g1e.net","GrapeshotCrawler","urlappendbot","brainobot","fr-crawler","binlar","SimpleCrawler","Twitterbot","cXensebot","smtbot","bnf.fr_bot","A6-Indexer","ADmantX","Facebot","OrangeBot","memorybot","AdvBot","MegaIndex","SemanticScholarBot","ltx71","nerdybot","xovibot","BUbiNG","Qwantify","archive.org_bot","Applebot","TweetmemeBot","crawler4j","findxbot","SemrushBot","yoozBot","lipperhey","y!j-asr","Domain Re-Animator Bot","AddThis","Screaming Frog SEO Spider","MetaURI","Scrapy","LivelapBot","OpenHoseBot","CapsuleChecker","collection@infegy.com","IstellaBot","DeuSu/","betaBot","Cliqzbot/","MojeekBot/","netEstate NE Crawler","SafeSearch microdata crawler","Gluten Free Crawler/","Sonic","Sysomos","Trove","deadlinkchecker","Slack-ImgProxy","Embedly","RankActiveLinkBot","iskanie","SafeDNSBot","SkypeUriPreview","Veoozbot","Slackbot","redditbot","datagnionbot","Google-Adwords-Instant","adbeat_bot","WhatsApp","contxbot","pinterest","electricmonk","GarlikCrawler","BingPreview/","vebidoobot","FemtosearchBot","Yahoo Link Preview","MetaJobBot","DomainStatsBot","mindUpBot","Daum","Jugendschutzprogramm-Crawler","Xenu Link Sleuth","Pcore-HTTP"];if(b.userAgent)for(var c=0;c<a.length;c++)if(b.userAgent.toLowerCase().match(a[c].toLowerCase()))return!0;return!1}function i(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"===a?b:3&b|8;return c.toString(16)})}var j=a.console||{log:function(){}},k="1.2.3",l=this,m=!1,n={affUrl:null,affCode:null,networkCode:null,UID:null,SUID:null,disable:h(),data:{value:1,ab:0}},o=1e3,p="http://organic/",q=1,r=1e3*q,s=60*r,t=60*s,u=24*t,v=365*u;return this.defaultCode=null,this.atlasDebug=function(){if(1==f.get("atlas_debug"))try{var a=Array.prototype.slice.call(arguments);a.unshift("[AtlasLib]"),j.log.apply(j,a)}catch(b){}},this.isNaffNetwork=function(){return l.isNetwork(["mdh"])},this.isPsNetwork=function(){return l.isNetwork(["rd","gfl","rk"])},this.isNetwork=function(a){return a&&n.networkCode&&a.indexOf(n.networkCode.toLowerCase())!=-1},this.isAdsPurchasingProgram=function(){var a=[4,51,270,271];return a.indexOf(atlas.getDecodedReferralCode().p)!=-1},this.decodeBase64=function(a){var b=l.cleanupPaddingBase64(a);return Base64.decode(b)},this.decodeHTML=function(a){return a&&(a=decodeURIComponent(a),a=decodeURIComponent(a)),a},this.cleanupPaddingBase64=function(a){var b=a.replace(/\=+$/,""),c="";if(b.length%4!=0){var d=4-b.length%4;c=Array(d+1).join("=")}return b+c},this.saveAtstrack=function(a){try{if(a){var b=f.get();for(var c in b)b.hasOwnProperty(c)&&0===c.lastIndexOf("atstrackPiece",0)&&f.remove(c,l.getCookieOption(14*v));if(n.splitAtlasData){for(var d,e=0,g=0,h=a.length;g<h;g+=o)e++,d=a.slice(g,o+g),f.set("atstrackPiece"+e,d,l.getCookieOption(14*v));f.remove("atstrack",l.getCookieOption(14*v))}else f.set("atstrack",a,l.getCookieOption(14*v))}}catch(i){l.atlasDebug("Error trying to save atstrack"),n=null}},this.restore=function(){try{var a=f.get("atstrack");if(!a){a="";for(var b=1;atstrackPiece=f.get("atstrackPiece"+b),atstrackPiece;b++)a+=atstrackPiece}a!==g&&a.length>0&&(n=JSON.parse(l.decodeBase64(a)))}catch(c){l.atlasDebug("Invalid atstrack value"),n=null}},this.extractHostname=function(a){var b;return b=a.indexOf("://")>-1?a.split("/")[2]:a.split("/")[0],b=b.split(":")[0],b=b.split("?")[0]},this.extractRootDomain=function(a){var b=l.extractHostname(a),c=b.split("."),d=c.length;return d>2&&(b=c[d-2]+"."+c[d-1]),b},this.getCookieOption=function(a){var b={},c="."+l.extractRootDomain(location.hostname);return a&&l.isNetwork(["rk","gfl"])&&n.data!=g&&n.data.aclid==g?b.expires=new Date((new Date).getTime()+u):a&&(b.expires=new Date((new Date).getTime()+a)),"localhost"!==c.host&&(b.domain=c,b.path="/"),b},this.save=function(){n.affCode&&f.set("ats",n.affCode,l.getCookieOption(30*u)),this.saveAtstrack(Base64.encode(JSON.stringify(l.getAtlasData())))},this.getAtlasData=function(){var a=!(!(b.vendor&&b.vendor.match(/Apple/)&&b.userAgent)||b.userAgent.match(/CriOS/)),c=!(!b.userAgent||!b.userAgent.match(/Opera|OPR\//));if(n.splitAtlasData||!a&&!c)return n;var d={};return d.networkCode=n.networkCode,d.defaultCode=n.defaultCode,d.affCode=n.affCode,d.SUID=n.SUID,n.data&&(d.data={ab:n.data.ab,adId:n.data.adId,aclid:n.data.aclid,realEstate:n.data.realEstate,postbackParams:n.data.postbackParams,sku:n.data.sku}),n.vortexdata&&(d.vortexdata={_sbrowser:n.vortexdata._sbrowser,_sos:n.vortexdata._sos,guid:n.vortexdata.guid,devtype:n.vortexdata.devtype}),d},this.init=function(a,b,c,d){c=l.cleanupPaddingBase64(l.decodeHTML(c)),l.restore();try{var e=JSON.parse(JSON.stringify({affUrl:a,networkCode:b,defaultCode:c,splitAtlasData:d,atlasStorage:n}));l.atlasDebug("Initializing: ",e)}catch(f){}l.defaultCode=c,n.defaultCode=c,n.affUrl=a,n.networkCode=b,n.splitAtlasData=d,m=!0},this.autoInit=function(){l.restore(),n.affUrl==g&&n.networkCode==g||(m=!0)},this.isConfigured=function(){return m},this.testCode=function(a){return/("a":)/.test(a)||/("u":)/.test(a)?"ats":/\./.test(a)?"4":/:/.test(a)?"3":l.isNaffNetwork()?"naff":(l.atlasDebug("atlas.unable_to_detect_referral_code_type"),null)},this.getCodeType=function(a){try{var b=l.decodeBase64(a),c=l.testCode(b);return null===c&&(c=l.testCode(a)),c}catch(d){return l.testCode(a)}return null},this.identifyCode=function(a){return n.codeType=l.getCodeType(a),l.save(),n.codeType},this.checkRoNCode=function(a){try{if("ats"==l.getCodeType(a)){var b=JSON.parse(l.decodeBase64(a));null==b.n&&null==b.s&null==b.e&&(a=l.overwriteLinkCodeSiteConfiguration(a))}}catch(c){l.atlasDebug(c)}return a},this.overwriteLinkCodeSiteConfiguration=function(a){try{if("ats"==l.getCodeType(a)){var b=JSON.parse(l.decodeBase64(a)),c=JSON.parse(l.decodeBase64(l.defaultCode));b.n===c.n&&b.s===c.s&&b.e===c.e||(b.n=c.n,b.s=c.s,b.e=c.e,a=Base64.encode(JSON.stringify(b)),n.affCode===a&&f.get("atsm")!==g||l.trackStep("o"))}}catch(d){l.atlasDebug(d)}return a},this.isSeoReferrer=function(){try{var a,b=[{name:"Google",url:"www.google."},{name:"Bing",url:"www.bing."},{name:"Yahoo",url:".yahoo.com"},{name:"Yandex",url:".yandex.com"},{name:"Other",url:["search.aol.","search.seznam.cz","searches.globososo.com","nova.rambler.ru","go.mail.ru","ricerca.virgilio.it","www.haosou.com","www.so.com","www.ask.com","www.sogou.com","www.baidu.com"]}];if(n.data.referralPath&&n.data.referralPath.length>0?a=n.data.referralPath:d.referrer&&d.referrer.length>0&&(a=d.referrer),a){var c=parseUri(a).host;if(c)for(var e=0;e<b.length;e++){var f=b[e],g=f.url;if(Array.isArray(g)){for(var h=0;h<g.length;h++)if(seoReferrerURLElement=g[h],c.indexOf(seoReferrerURLElement)>=0)return f.name}else if(c.indexOf(g)>=0)return f.name}}}catch(i){l.atlasDebug(i)}},this.overwriteSeo=function(a){try{if("ats"==l.getCodeType(a)){var b=l.isSeoReferrer();if(b){var c=JSON.parse(l.decodeBase64(a));c.a=12437,c.p=94,c.cn=n.networkCode.toUpperCase()+"_Organic_"+b,delete c.u,delete c.c,a=Base64.encode(JSON.stringify(c)),n.affCode===a&&f.get("atsm")!==g||l.trackStep("s")}}}catch(d){l.atlasDebug(d)}return a},this.decodeAtlasCode=function(a){return JSON.parse(l.decodeBase64(a))},this.recordReferral=function(){var a=f.get("nats_cookie");if(a!=g){a=l.decodeHTML(a);var b=parseUri(a);b.host!=d.host&&(n.data.referralDomain=b.host,n.data.referralPath=a)}else if(n.tmpReferralDomain!=g)n.data.referralDomain=n.tmpReferralDomain,n.data.referralPath=n.referralPath;else{var b=parseUri(d.referrer);b.host!=d.host?(n.data.referralDomain=b.host,n.data.referralPath=d.referrer):(n.data.referralDomain=p,n.data.referralPath=p)}},this.recordAdDetails=function(){var b=parseUri(a.location.href);b.queryKey.ad_id!=g?n.data.adId=b.queryKey.ad_id:n.data.adId=0,b.queryKey.aclid!=g?n.data.aclid=b.queryKey.aclid:b.queryKey.a2cid!=g&&(n.data.aclid=b.queryKey.a2cid)},this.recordPostbackOptions=function(){var b=parseUri(a.location.href);b.queryKey.apb!=g&&(n.data.postbackParams=b.queryKey.apb)},this.triggerPostbackPixel=function(a,b,d){n.pbf==g&&(n.data.transactionId=b+"",n.data.value=d+"",n.data.eventType=a,(new c).src="https://www.adultforce.com/api/call_postback/pixel/"+n.affCode+"?params="+Base64.encode(JSON.stringify(n)),n.pbf=!0,delete n.data.transaction_id,delete n.data.value,delete n.data.eventType,l.save())},this.recordAdblockDetection=function(){var b=parseUri(a.location.href.toLowerCase());n.data.ab=b.queryKey.ab!=g||0!=n.data.ab?1:0},this.gatherGADetails=function(){try{a._gaTracker!=g&&(_gaTracker(function(a){n.data.ga={t:a.get("trackingId"),c:a.get("clientId"),u:a.get("userId")}}),l.isNaffNetwork()||(l.trackStep("g"),l.save()))}catch(b){l.atlasDebug(b)}},this.setData=function(a,b){null==b?delete n.data[a]:n.data[a]=b,l.save()},this.codeOwnershipHasNotChanged=function(a,b){try{if("ats"===l.getCodeType(a)&&"ats"===l.getCodeType(b)){var a=JSON.parse(l.decodeBase64(a)),b=JSON.parse(l.decodeBase64(b));return a.a===b.a&&a.u===b.u&&a.c===b.c&&a.cn===b.cn&&a.p===b.p}return a===b}catch(c){return!0}},this.startVisit=function(a,c){var d=l.codeOwnershipHasNotChanged(a,c);n.data={value:1,ab:0,userAgent:b.userAgent,realEstate:n.data&&n.data.realEstate,sku:n.data&&n.data.sku,postbackParams:d&&n.data&&n.data.postbackParams||g,aclid:d&&n.data&&n.data.aclid||g},n.affCode=a,l.save(),l.retrieveUserDetails(),l.gatherGADetails(),l.recordAdblockDetection(),delete n.pbf,l.recordPostbackOptions(),l.recordReferral(),l.recordAdDetails(),n.UID=null!=n.UID?n.UID:i(),n.SUID=i(),n.visitStart=(new Date).getTime(),l.save(),l.atlasDebug("atlas.recording_unique_visitor"),l.asynccall(a,"UNIQUE_TRACK"),l.trackStep("v")},this.clearSession=function(){n.data=null,l.save()},this.initVortex=function(a){var b="TRACK"===a||"UNIQUE_TRACK"===a?10303:10304,c=d.location.protocol+"//atlas.etahub.com",e={url:c+"/events",userDetailsUrl:c+"/guid"};return this.vortex=new BES.ProTrack.Vortex.Class(b,e),this.vortex},this.retrieveUserDetails=function(){if(n.disable===!0)return!1;var a=this.initVortex(null);a.userDetails!==g&&n.vortexdata===g&&(n.vortexdata=e.extend(n.vortexdata,a.userAgent()),a.userDetails(function(a,b){a?l.atlasDebug("Something went wrong with the call userDetails",a,b):(n.vortexdata.guid=b.guid,n.vortexdata.hwmodel=b["51d_hwmodel"],n.vortexdata.hwfamily=b["51d_hwfamily"],n.vortexdata.devtype=b["51d_devtype"],l.trackStep("u"),delete n.vortexdata._splugins,delete n.vortexdata._bcookies,l.save()),l.save()},!1))},this.getAtlasLibVersion=function(){return k},this.asynccall=function(a,c){if(n.disable===!0)return!1;var h=c,i=l.identifyCode(a),j=this.initVortex(c),m=parseUri(d.URL);m=d.URL.replace("&atstrack="+m.queryKey.atstrack,""),m.length>=500&&(m=m.substring(0,500)+"...");var o={affCode:a,affCodeType:i||"unknown",affDomain:n.affUrl,networkCode:n.networkCode,conversionType:c,convertingPage:m,userAgent:b.userAgent};switch(i){case 4:break;case"ats":try{var p=JSON.parse(l.decodeBase64(a));p.a!==g}catch(q){l.atlasDebug(q)}break;default:case 3:try{a=a.split(",")[0],a.Length%4!=0&&(a+=new String("=",4-a.Length%4));var r=l.decodeBase64(a).split(":");r.length>2&&(o.legacyCampaignId=r[0],o.legacySiteId=r[1],o.legacyProgramId=r[2])}catch(q){delete o.legacyCampaignId,delete o.legacySiteId,delete o.legacyProgramId}}o=e.extend(o,n.data.transaction),delete n.data.transaction,o=e.extend(o,n.data),o.atlasJsVersion=k,l.atlasDebug("atlas."+h,o),j.sendEvent(h,o,callback=function(a,b){b&&b.text?(f.set("etaguid",JSON.parse(b.text.text).guid,l.getCookieOption()),n.data.vortexGuid=JSON.parse(b.text.text).guid,l.setData("transaction",null)):l.atlasDebug("Something went wrong with the call sendEvent",a,b)})},this.setupAutoCampaign=function(a,b){try{if(b!==g&&b.length>0){var c=JSON.parse(l.decodeBase64(a));c.cn=l.decodeHTML(b).replace(/"/g,"'").trim().substring(0,100),delete c.c,a=Base64.encode(JSON.stringify(c))}}catch(d){l.atlasDebug(d)}return a},this.setupDefaultCampaign=function(a){try{var b=JSON.parse(l.decodeBase64(a)),c=b.c&&b.c.toString().length>0,d=b.cn&&b.cn.toString().length>0,e=b.u&&b.u.toString().length>0;(!c&&!d||e&&c)&&(b.cn="Default",delete b.c),a=Base64.encode(JSON.stringify(b))}catch(f){l.atlasDebug(f)}return a},this.setupUsername=function(a,b){var c;try{if(b!==g&&b.length>0){if(b=l.decodeHTML(b).trim().substring(0,64),a!==g){var a=JSON.parse(l.decodeBase64(a));a.u=b,delete a.a}else a={u:b};c=Base64.encode(JSON.stringify(a))}}catch(d){l.atlasDebug(d)}return c||a},this.processAts=function(a,b){return a=l.decodeHTML(b.ats),a=l.processAtaAtc(a,b),l.isPsNetwork()&&b.id!==g&&(a=l.processIdCmp(a,b)),a},this.processAtaAtc=function(a,b){return a=l.setupUsername(a,b.ata),a=l.setupAutoCampaign(a,b.atc),a=l.setupDefaultCampaign(a)},this.processIdCmp=function(a,b){return a=l.setupUsername(a,b.id),a=l.setupAutoCampaign(a,b.cmp),a=l.processAtaAtc(a,b)},this.trackStep=function(a){if(a){n.steps=n.steps||"";var b=n.steps.match(/[^\;]+/g)||[];"|"===b[b.length-1]&&"|"===a||b.push(a),b.length>50&&b.shift(),n.steps=b.join(";"),l.save(),l.atlasDebug("trackingStep",n.steps)}},this.postProcessCode=function(a){return a=atlas.isOverwriteLinkCodeSiteConfiguration===!0?l.overwriteLinkCodeSiteConfiguration(a):l.checkRoNCode(a),atlas.isOverwriteSeo===!0&&l.isSeoReferrer()&&(a=l.overwriteSeo(a)),a},this.getCode=function(){l.trackStep("|");var b,c=f.get("atss"),d=parseUri(a.location.href),e=null;if(c!==n.SUID){var h=f.get("nats"),i=(f.get("naff"),f.get("ats")),j=f.get("id"),k=f.get("cmp");if(d.queryKey.atstrack!==g)atlas.importAtlasData(d.queryKey.atstrack),e="im";else if(d.queryKey.ats!==g&&d.queryKey.ats.length>0)b=l.processAts(b,d.queryKey),e="au";else if(d.queryKey.ata!==g&&d.queryKey.ata.length>0)b=l.processAtaAtc(b,d.queryKey),e="tu";else if(l.isPsNetwork()&&d.queryKey.id!==g)b=l.processIdCmp(b,d.queryKey),e="iu";else if(d.queryKey.nats!==g)b=d.queryKey.nats,e="nu";else if(i!==g)b=i,e="ac";else if(h!==g)b=h,e="nc";else if(l.isPsNetwork()&&j!==g)b=l.setupUsername(b,j),b=l.setupAutoCampaign(b,k),b=l.setupDefaultCampaign(b),e="ic";else{if(l.isNaffNetwork())return n.disable=!0,void l.trackStep("n");null!==n.affCode?(b=n.affCode,e="as"):(b=n.defaultCode,e="d")}}else d.queryKey.ats!==g?(b=l.processAts(b,d.queryKey),e="ae"):d.queryKey.ata!==g&&d.queryKey.ata.length>0?(b=l.processAtaAtc(b,d.queryKey),e="te"):d.queryKey.nats!==g?(b=d.queryKey.nats,e="ne"):l.isPsNetwork()&&d.queryKey.id!==g?(b=l.processIdCmp(b,d.queryKey),e="ie"):atlas.isOverwriteLinkCodeSiteConfiguration===!0&&l.isNetwork(["ntk"])&&(b=f.get("ats"),e="ce");return b&&(b=l.postProcessCode(b),n.affCode===b&&f.get("atsm")!==g||l.trackStep(e)),b},{autoTrack:function(){var a=l.getCode();if(a){atlas.track(a);try{var b=JSON.parse(l.decodeBase64(a));l.atlasDebug("tracking code ==> ",a,b)}catch(c){}}f.set("atss",n.SUID,l.getCookieOption())},track:function(a){if(l.isConfigured()&&a){var b=n.affCode!==a,c=f.get("atsm")!==g,d=f.get("atsd")!==g;!b&&d||(l.startVisit(a,n.affCode),f.set("atsd",n.SUID,l.getCookieOption(u))),!b&&d&&c||(l.trackStep("t"),l.asynccall(a,"TRACK"),f.set("atsm",n.SUID,l.getCookieOption(15*s)),l.atlasDebug("atlas.recording_visit",l.decodeBase64(a)))}},recordReferral:function(){if(l.isConfigured()){if(d.referrer!=g){var a=parseUri(d.referrer);a.host!=d.host&&(n.tmpReferralDomain=a.host,n.tmpReferralPath=d.referrer)}l.atlasDebug("atlas.recording_referral_definition")}},restoreConfig:function(){l.autoInit()},config:function(a,b,c,d){l.init(a,b,c,d)},setOverwriteLinkCodeSiteConfiguration:function(a){atlas.isOverwriteLinkCodeSiteConfiguration=a!==!1},setOverwriteSeo:function(a){atlas.isOverwriteSeo=a!==!1},joinHit:function(a){l.isConfigured()&&n.affCode&&(l.setData("packageId",a),l.asynccall(n.affCode,"JOINHIT"))},joinSubmit:function(a,b){l.isConfigured()&&n.affCode&&(l.setData("priceId",b),l.setData("paymentTypeId",a),l.asynccall(n.affCode,"JOINSUBMIT"))},gatewayHit:function(a){l.isConfigured()&&n.affCode&&(l.setData("cascadeId",a),l.asynccall(n.affCode,"JOIN_GATEWAYHIT"))},joinGatewayHit:function(a){l.isConfigured()&&n.affCode&&(l.setData("cascadeId",a),l.asynccall(n.affCode,"JOIN_GATEWAYHIT"))},oneClickGatewayHit:function(a){l.isConfigured()&&n.affCode&&(l.setData("cascadeId",a),l.asynccall(n.affCode,"ONE_CLICK_GATEWAYHIT"))},memberGatewayHit:function(a){l.isConfigured()&&n.affCode&&(l.setData("cascadeId",a),l.asynccall(n.affCode,"MEMBER_GATEWAYHIT"))},gatewaySubmit:function(){l.isConfigured()&&n.affCode&&l.asynccall(n.affCode,"JOIN_GATEWAYSUBMIT")},joinGatewaySubmit:function(){l.isConfigured()&&n.affCode&&l.asynccall(n.affCode,"JOIN_GATEWAYSUBMIT")},oneClickGatewaySubmit:function(){l.isConfigured()&&n.affCode&&l.asynccall(n.affCode,"ONE_CLICK_GATEWAYSUBMIT")},memberGatewaySubmit:function(){l.isConfigured()&&n.affCode&&l.asynccall(n.affCode,"MEMBER_GATEWAYSUBMIT")},signUp:function(a,b){l.isConfigured()&&n.affCode&&(n.data.productMemberId||(l.setData("productMemberId",a),l.setData("memberId",b||null),l.asynccall(n.affCode,"SIGNUP")))},denial:function(){l.isConfigured()&&n.affCode&&l.asynccall(n.affCode,"DECLINE")},conversion:function(a,b){l.isConfigured()&&n.affCode&&b&&n.SUID!=f.get("atst")&&(l.setData("transaction",b),l.asynccall(n.affCode,a))},triggerPixelPostback:function(a,b,c){l.triggerPostbackPixel(a,b,c)},setRealEstate:function(a){return l.isConfigured()&&n.affCode?(a=a?a.trim().substring(0,255):a,void l.setData("realEstate",a)):void j.error("[AtlasLib]","setRealEstate() was called before the lib was initialized")},setSKU:function(a){return l.isConfigured()&&n.affCode?void l.setData("sku",a):void j.error("[AtlasLib]","setSKU() was called before the lib was initialized")},exportAtlasData:function(){return customAttributes=e.extend(n.vortexdata,n.data),Base64.encode(JSON.stringify(customAttributes))},importAtlasData:function(a){f.get("atsi")!==a&&(n=JSON.parse(l.decodeBase64(a)),f.set("atsi",a,l.getCookieOption()),l.save())},cleanSession:function(){f.expire("atss")},storage:function(){if(1==f.get("atlas_debug"))return n},getUserDetails:function(){return l.retrieveUserDetails(),n.vortexdata},debug:function(){return f.set("atlas_debug",1,l.getCookieOption()),a.atlas},debugCookieInfo:function(){return l.getCookieOption()},version:function(){return l.getAtlasLibVersion()},adblock:function(){return l.isConfigured()&&n.affCode?void l.setData("ab",1):void j.error("[AtlasLib]","adblock() was called before the lib was initialized")},getReferralCode:function(){return n.affCode},getDecodedReferralCode:function(){var a=this.getReferralCode();return"ats"===l.getCodeType(a)?JSON.parse(l.decodeBase64(a)):a},isAdsPurchasing:function(){return l.isAdsPurchasingProgram()}}}a.atlas=new h}(this,navigator,Image,document,jQuery,window.AtlasCookies);
