function goToPage(e){if(document.getElementsByClassName)var t=document.getElementsByClassName("lp-root");else var t=document.querySelectorAll(".lp-root");for(var e=--e,r=0;r<t.length;r++)t[r].setAttribute("class",t[r].getAttribute("class").replace(/(?:^|\s)active(?!\S)/g,""));t[e].setAttribute("class",t[e].getAttribute("class")+" active")}var RedactorConfig={};!function(e){e(function(){var t={selectors:{body:"body",form:"form",lpRootActive:".lp-root.active",attrHover:"[hover]",attrActive:"[active]",attrHoverActive:"[hover], [active]",attrValidateType:"[validate-type]",formRow:".lp-form-row",formError:".lp-form-validation-message",validateRequired:"[validate-required]",targetButton:'[href*="/site/redirectpage"]',formDatePicker:".form-date-picker",formDatePickerSelect:".form-date-picker select",formBirthdayDay:".form-date-picker-day",formBirthdayMonth:".form-date-picker-month",formBirthdayYear:".form-date-picker-year"},tags:{script:"script",form:"form",input:"input"},urls:{form:"/site/form/jumpId/"},attr:{style:"style",normal:"normal",hover:"hover",active:"active",validateType:"validate-type",type:"type",name:"name",action:"action",onClick:"onclick",href:"href"}};t.Pseudo=function(){var t=this,r=function(e,t){var r=t.split(";"),a="";for(var o in r)a=r[o].split(":"),a[0]&&a[1]&&e.css(a[0].trim(),a[1].trim())};e(t.selectors.attrHoverActive).each(function(){var r=e(this);r.attr(t.attr.normal,r.attr(t.attr.style))}),e(t.selectors.attrHover).hover(function(){var a=e(this);r(a,a.attr(t.attr.hover))},function(){var a=e(this);r(a,a.attr(t.attr.normal))}),e(t.selectors.attrActive).mousedown(function(){var a=e(this);r(a,a.attr(t.attr.active))}),e(t.selectors.attrActive).mouseup(function(){var a=e(this);r(a,a.attr(t.attr.normal))})},t.Form=function(){var r=!1,a={text_field:/\S+/,single_line:/\S+/,multi_line:/\S+/,username:/^[^\s]+$/,email:/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,secondary_email:/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,first_name:/\S+/,last_name:/\S+/,screen_name:/\S+/,pass:/.+/,confirm_pass:/.+/,phone_number:/^(?:(?:\(?(?:00|\+)([1-4]\d\d|[1-9]\d?)\)?)?[\-\.\ \\\/]?)?((?:\(?\d{1,}\)?[\-\.\ \\\/]?){0,})(?:[\-\.\ \\\/]?(?:#|ext\.?|extension|x)[\-\.\ \\\/]?(\d+))?$/,age:/\S+/,postal_code:/^\S{5}$/,zip_code:/^\S{5}$/},o=goToPage,i=[],n=function(r){var o=!0;return r.find(t.selectors.attrValidateType).each(function(){var r=e(this),i=r.closest(t.selectors.formRow).find(t.selectors.formError),n=this.tagName.toLowerCase(),c=r.attr(t.attr.type),s=r.attr(t.attr.name),l=r.attr(t.attr.validateType),f=r.is(t.selectors.validateRequired);"select"==n?r.val()&&""!=r.val()?i.hide():(i.show(),o=!1):"radio"==c||"checkbox"==c?!e('[name="'+s+'"]').is(":checked")&&f?(i.show(),o=!1):i.hide():!a[l].test(r.val())&&""!=r.val()||""==r.val()&&f?(i.show(),o=!1):i.hide()}),o},c=function(){var r=e(t.selectors.lpRootActive).find(t.selectors.form);return r.length?r:null},s=function(r,a){var o=e(t.selectors.targetButton);if(o.length){var i=o.attr(t.attr.href).match(/sid\=(\d+)/);i&&i[1]&&e.post(location.href.match(/(.*:\/\/[^\/]*)\//)[1]+t.urls.form+i[1],r,a)}},l=function(r,a){var o,i=document.createElement(t.tags.form);i.method="post",i.action=r;var n,c;for(n in a)c=document.createElement(t.tags.input),c.type="hidden",c.name=a[n].name,c.value=a[n].value,i.appendChild(c);return o=e(i),e(t.selectors.body).append(o),o.hide(),o},f=function(e){var r=e.find(t.selectors.formBirthdayDay).val(),a=e.find(t.selectors.formBirthdayMonth).val(),o=e.find(t.selectors.formBirthdayYear).val();e.next().val(r+"-"+a+"-"+o)},m=function(t,a){if(location.href.indexOf("jumppage/preview/id/")<0){if(r)return;t=location.href.match(/.*:\/\/[^\/]*\//)[0]+t.replace(/.*\/\/[^\/]*/,"").replace(/^\/+/,""),e.getJSON(t+"&show_url=true",function(e){e&&e.url&&(l(e.url,a).submit(),r=!0)})}else alert("You can not go to redirect from preview!")};goToPage=function(e){var t=c();return t&&n(t)&&location.href.indexOf("jumppage/preview/id/")<0?(i=i.concat(t.serializeArray()),s(t.serialize(),function(){o(e)})):(!t||location.href.indexOf("jumppage/preview/id/")>=0)&&o(e),!1},e(t.selectors.formDatePicker).each(function(){f(e(this))}),e(t.selectors.formDatePickerSelect).change(function(){f(e(this).closest(t.selectors.formDatePicker))}),e("body").on("click",'a[href*="/site/redirectpage"]:not([onclick*="goToPage"]), a[href="{{REDIRECT_URL}}"]:not([onclick*="goToPage"])',function(){var t=c(),a=e(this).attr("href");return t?n(t)&&(i=i.concat(t.serializeArray()),s(t.serialize(),function(){m(a,i)})):i.length?m(a,i):r||(location.href.indexOf("jumppage/preview/id/")<0?(location.href=location.href.match(/.*:\/\/[^\/]*\//)[0]+a.replace(/.*\/\/[^\/]*/,"").replace(/^\/+/,""),r=!0):alert("You can not go to redirect from preview!")),!1})}(),e(function(){t.Pseudo()})})}(jQuery);
